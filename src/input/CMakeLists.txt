SET(LIB_NAME input)
SET(HEADER_PATH ${CalVR_SOURCE_DIR}/include/${LIB_NAME})
SET(LIB_PUBLIC_HEADERS
    ${HEADER_PATH}/TrackingManager.h
    ${HEADER_PATH}/TrackerBase.h
    ${HEADER_PATH}/TrackerShmem.h
    ${HEADER_PATH}/TrackerSlave.h
    ${HEADER_PATH}/TrackerMouse.h
)

SET(EXTRA_SOURCE)

IF(VRPN_FOUND)
   SET(LIB_PUBLIC_HEADERS ${LIB_PUBLIC_HEADERS} ${HEADER_PATH}/TrackerVRPN.h)
   SET(EXTRA_SOURCE ${EXTRA_SOURCE} TrackerVRPN.cpp)
ENDIF(VRPN_FOUND)

ADD_LIBRARY(${LIB_NAME}
    ${CALVR_DYNAMIC_OR_STATIC}
    ${LIB_PUBLIC_HEADERS}
    ${EXTRA_SOURCE}
    TrackingManager.cpp
    TrackerBase.cpp
    TrackerShmem.cpp
    TrackerSlave.cpp
    TrackerMouse.cpp
)

IF(VRPN_FOUND)
    ADD_DEFINITIONS(-DWITH_VRPN)
    INCLUDE_DIRECTORIES(${VRPN_INCLUDE_DIR})
    TARGET_LINK_LIBRARIES(${LIB_NAME} ${VRPN_LIBRARY})
ENDIF(VRPN_FOUND)

INCLUDE_DIRECTORIES(${OSG_INCLUDE_DIR})
TARGET_LINK_LIBRARIES(${LIB_NAME} ${OSG_LIBRARIES})

INSTALL(TARGETS ${LIB_NAME} DESTINATION lib)
